# Administración de servidores web:
- Configuración avanzada del servidor web.
- Módulos: instalación, configuración y uso.
- Hosts virtuales. Creación, configuración y utilización.
- Autenticación y control de acceso.
- El protocolo HTTPS.
- Certificados. Servidores de certificados.
- Empaquetado de aplicaciones web.
- Despliegue de aplicaciones sobre servidores web.

# Administración de servidores de aplicaciones:
- Arquitectura y configuración básica del servidor de aplicaciones.
- Administrar aplicaciones web.
- Autenticación de usuarios. Dominios de seguridad para la autenticación.
- Administración de sesiones. Sesiones persistentes.
- Archivos de registro de acceso y filtro de solicitudes.
- Configurar el servidor de aplicaciones para cooperar con servidores web.
- Despliegue de aplicaciones en el servidor de aplicaciones.
- Seguridad en el servidor de aplicaciones. Configurar el servidor de aplicaciones con soporte SSL/T.

-----------------

# LFI - RFI
* https://github.com/jesusninoc/ClasesSAD/blob/master/2020-11-20.md#rfi
* https://github.com/jesusninoc/ClasesSAD/blob/master/2020-11-20.md#lfi

-----------------

# Almacenar información
* https://github.com/jesusninoc/ClasesIAW/blob/master/2020-11-23.md#ejercicio-almacenar-informaci%C3%B3n-sobre-un-usuario-soluci%C3%B3n-pablo-q

## Almacen GPS y sesión
* https://github.com/jesusninoc/ClaseDAW/blob/master/2020-11-19.md#almacen-gps-y-sesi%C3%B3n

## Mostrar usuarios en WordPress
```PHP			
$users = get_users();

foreach ( $users as $user ) {
    echo ' <a href="https://www.jesusninoc.com/user/' . esc_html( $user->display_name )  . '" target="_blank">' . esc_html( $user->display_name )  . '</a>';
}
```

## Generar números aleatorios
```PHP			
<?php

for ($i = 1; $i <= 100; $i++) {
	$numero = mt_rand(676000000,677000000);
	echo $numero . ' ';
}

?>
```

## Enviar un mail cuando alguien accede a una carpeta que no debe
```PHP
<?php
 $ip=$_SERVER['REMOTE_ADDR'];
 $subject="Acceso a secreto";
 $message = "Name: " . $message . "IP of sender: " . $ip;
 mail( "info@example.com", $subject, $message, "From: info@example.com" );
?>
```

## Hacer un login con sesión (GET)
```PHP
<?PHP
session_start();
if($_SERVER["REQUEST_METHOD"] == "GET")
{
    $usuario = "pedro";
    $pass= "123456";
    if(! ($_GET['username'] == $usuario && $_GET['password'] == $pass) )
    {
        Echo "<html>";
        Echo "<title>MUY mal</title>";
        Echo "<b>Acceso denegado</b>";        
        
        session_destroy() ;
        
        return false;
    }
    else {
    
        Echo "<html>";
        Echo "<title>MUY bien</title>";
        Echo "<b>Acceso concedido</b>";
 
        session_destroy();    
 
        return true;
    }
}
?>
```

-----------------

# Copiar antes de que desaparezca
## Código PHP
```PHP
<?php
$target_dir = "uploads/";
$target_file = $target_dir . basename($_FILES["fileToUpload"]["name"]);
echo $_FILES["fileToUpload"]["tmp_name"];

move_uploaded_file($_FILES["fileToUpload"]["tmp_name"], $target_file);
sleep(10);
?>
```
## Código en PowerShell
```PowerShell
cd C:\xampp\tmp

for(1)
{
    mv * ..\supersecreto
}
```

-----------------

# Repaso de sesiones

```PHP
<!--Página  "/php/autentificacionUsuario/index.php"-->
<body>
 <div id="pagina">
 	<?php if($_SESSION["autentificar"]==true) { ?>
	 <form method="post" action="/php/autentificacionUsuario/index.php">
		<p>
			<label>Nombre</label>
			<input name="nombre" type="text" size="10" maxlength="10" />
		</p>
		<p>
			<label>Contraseña</label>
			<input name="contraseña" type="text" size="10" maxlength="10" />
		</p>
		<p>
			<input name="enviar" type="submit" value="enviar" />
		</p>
	</form>
    	 <?php } else { ?>

 		<!--Codigo de la página con un botón de cerrar sesion -->

 	 <?php } ?>
</div>

</body>

La lógica de la página sería:

<?php
	session_start();
	
	if(empty($_SESSION))
	{
		$_SESSION["autentificar"]=true;
		return;
	}
	
	if($_SESSION["autentificar"]==true)
	{ 
		<! --validar entrada -->
		if($_POST["nombre"]!="Juan" || $_POST["contraseña"]!="1234")
	    	{	    
	 	    return;
		}
	}
	
	$_SESSION["autentificar"]=false;


    if(isset($_POST["cerrar"]))
    {
		$_SESSION = array();
		
	// Si se desea destruir la sesión completamente, borre también la cookie
 de sesión.
		// Nota: ¡Esto destruirá la sesión, y no la información de la sesión!
		//La función ini_get comprueba si la dirctiva pasada esta habilitada
		if (ini_get("session.use_cookies")) 
		{
		      $params = session_get_cookie_params();
		      setcookie(session_name(), '', time() - 42000,
		      $params["path"], $params["domain"],
		                $params["secure"], $params["httponly"]);
		}
		         
		// Finalmente, destruir la sesión.
		session_destroy();
		return;
    }
<!--Lógica de la página  -->  

 ?>
```
